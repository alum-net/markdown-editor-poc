{"version":3,"names":["parseStringWithUnitToNumber","createLoadingIndicator","INLINE_IMAGE_PREVIEW_DEBOUNCE_TIME_MS","INLINE_IMAGE_MIN_HEIGHT","inlineImageDefaultStyles","position","bottom","left","timeoutMap","Map","getImagePreviewElement","targetElement","Array","from","childNodes","find","el","contentEditable","getContainerPaddingBottom","imageHeight","imagePaddingTop","Math","max","scaleImageDimensions","imgElement","height","width","maxHeight","maxWidth","minHeight","minWidth","style","maxHeightValue","maxWidthValue","minHeightValue","minWidthValue","aspectRatio","scaledWidth","scaledHeight","handleOnLoad","currentInput","target","imageHref","markdownStyle","imageContainer","err","isConnected","currentElement","querySelector","getAttribute","currentElementURL","targetElementURL","currentSpinner","remove","img","firstChild","borderRadius","inlineImage","imgStyle","Object","assign","display","alignItems","justifyContent","appendChild","currentInputElement","imageElements","push","scaledImageHeight","imageMarginTop","marginTop","paddingBottom","createImageElement","targetNode","url","has","orderIndex","mapItem","get","clearTimeout","timeout","delete","setTimeout","document","createElement","setAttribute","Image","onload","element","onerror","src","set","uniqueId","updateImageTreeNode","newElement","cloneNode","currentParent","parentElement","includes","addInlineImagePreview","text","ranges","inlineImagesProps","addAuthTokenToImageURLCallback","imagePreviewAuthRequiredURLs","linkRange","r","type","substring","start","length","startsWith","imageMarginBottom","marginBottom","alreadyLoadedPreview","loadedImageContainer","spinner","loadingIndicatorContainer","loadingIndicator","undefined","forceRefreshAllImages","querySelectorAll","forEach","naturalWidth"],"sourceRoot":"../../../../src","sources":["web/inputElements/inlineImage.ts"],"mappings":"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","ignoreList":[]}
