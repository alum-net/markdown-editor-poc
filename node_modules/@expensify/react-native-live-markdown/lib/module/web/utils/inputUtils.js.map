{"version":3,"names":["isChildOfMarkdownElement","isChildOfMultilineMarkdownElement","BrowserUtils","ZERO_WIDTH_SPACE","isEventComposing","nativeEvent","isComposing","keyCode","getPlaceholderValue","placeholder","length","getElementHeight","node","styles","numberOfLines","tempElement","document","createElement","setAttribute","Object","assign","style","textContent","Array","fill","join","parentElement","appendChild","height","clientHeight","removeChild","normalizeValue","value","replaceAll","getTopParentNode","currentParentNode","parentNode","includes","getAttribute","didTwoCodeblocksMerge","isFirefox","hasPartOfBrokenCodeblock","lastChild","nodeName","parseInnerHTMLToText","target","cursorPosition","inputType","isMultiline","stack","text","shouldAddNewline","lastNode","childNodes","innerHTML","pop","isTopComponent","contentEditable","nodeType","Node","TEXT_NODE","firstChild","containsEmptyBlockElement","previousSibling","hasAddedNewline","nextBR","nextElementSibling","firstElementChild","tagName","remove","nextSibling","i","child","push","slice"],"sourceRoot":"../../../../src","sources":["web/utils/inputUtils.ts"],"mappings":"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","ignoreList":[]}
