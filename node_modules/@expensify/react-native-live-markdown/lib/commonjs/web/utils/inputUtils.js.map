{"version":3,"names":["_blockUtils","require","_browserUtils","_interopRequireDefault","e","__esModule","default","ZERO_WIDTH_SPACE","isEventComposing","nativeEvent","isComposing","keyCode","getPlaceholderValue","placeholder","length","getElementHeight","node","styles","numberOfLines","tempElement","document","createElement","setAttribute","Object","assign","style","textContent","Array","fill","join","parentElement","appendChild","height","clientHeight","removeChild","normalizeValue","value","replaceAll","getTopParentNode","currentParentNode","parentNode","includes","getAttribute","didTwoCodeblocksMerge","BrowserUtils","isFirefox","hasPartOfBrokenCodeblock","lastChild","nodeName","parseInnerHTMLToText","target","cursorPosition","inputType","isMultiline","stack","text","shouldAddNewline","lastNode","childNodes","innerHTML","pop","isTopComponent","contentEditable","nodeType","Node","TEXT_NODE","firstChild","containsEmptyBlockElement","previousSibling","hasAddedNewline","isChildOfMarkdownElement","nextBR","nextElementSibling","firstElementChild","tagName","remove","nextSibling","isChildOfMultilineMarkdownElement","i","child","push","slice"],"sourceRoot":"../../../../src","sources":["web/utils/inputUtils.ts"],"mappings":"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","ignoreList":[]}
