{"version":3,"names":["_styleUtils","require","_loadingIndicator","INLINE_IMAGE_PREVIEW_DEBOUNCE_TIME_MS","INLINE_IMAGE_MIN_HEIGHT","inlineImageDefaultStyles","position","bottom","left","timeoutMap","Map","getImagePreviewElement","targetElement","Array","from","childNodes","find","el","contentEditable","getContainerPaddingBottom","imageHeight","imagePaddingTop","Math","max","scaleImageDimensions","imgElement","height","width","maxHeight","maxWidth","minHeight","minWidth","style","maxHeightValue","parseStringWithUnitToNumber","maxWidthValue","minHeightValue","minWidthValue","aspectRatio","scaledWidth","scaledHeight","handleOnLoad","currentInput","target","imageHref","markdownStyle","imageContainer","err","isConnected","currentElement","querySelector","getAttribute","currentElementURL","targetElementURL","currentSpinner","remove","img","firstChild","borderRadius","inlineImage","imgStyle","Object","assign","display","alignItems","justifyContent","appendChild","currentInputElement","imageElements","push","scaledImageHeight","imageMarginTop","marginTop","paddingBottom","createImageElement","targetNode","url","has","orderIndex","mapItem","get","clearTimeout","timeout","delete","setTimeout","document","createElement","setAttribute","Image","onload","element","onerror","src","set","uniqueId","updateImageTreeNode","newElement","cloneNode","currentParent","parentElement","includes","addInlineImagePreview","text","ranges","inlineImagesProps","addAuthTokenToImageURLCallback","imagePreviewAuthRequiredURLs","linkRange","r","type","substring","start","length","startsWith","imageMarginBottom","marginBottom","alreadyLoadedPreview","loadedImageContainer","spinner","createLoadingIndicator","loadingIndicatorContainer","loadingIndicator","undefined","forceRefreshAllImages","querySelectorAll","forEach","naturalWidth"],"sourceRoot":"../../../../src","sources":["web/inputElements/inlineImage.ts"],"mappings":";;;;;;;AAEA,IAAAA,WAAA,GAAAC,OAAA;AAGA,IAAAC,iBAAA,GAAAD,OAAA;AAEA,MAAME,qCAAqC,GAAG,GAAG;AACjD,MAAMC,uBAAuB,GAAG,EAAE;AAElC,MAAMC,wBAAwB,GAAG;EAC/BC,QAAQ,EAAE,UAAU;EACpBC,MAAM,EAAE,CAAC;EACTC,IAAI,EAAE;AACR,CAAC;AAOD,MAAMC,UAAU,GAAG,IAAIC,GAAG,CAA8B,CAAC;AAEzD,SAASC,sBAAsBA,CAACC,aAAkC,EAAE;EAClE,OAAOC,KAAK,CAACC,IAAI,CAACF,aAAa,EAAEG,UAAU,IAAI,EAAE,CAAC,CAACC,IAAI,CAAEC,EAAE,IAAMA,EAAE,EAAkBC,eAAe,KAAK,OAAO,CAAC;AACnH;AAEA,SAASC,yBAAyBA,CAACC,WAAmB,EAAEC,eAAuB,EAAE;EAC/E,OAAO,GAAGC,IAAI,CAACC,GAAG,CAACnB,uBAAuB,EAAEgB,WAAW,CAAC,GAAGC,eAAe,IAAI;AAChF;AAEA,SAASG,oBAAoBA,CAACC,UAA4B,EAAE;EAC1D,MAAM;IAACC,MAAM;IAAEC;EAAK,CAAC,GAAGF,UAAU;EAClC,MAAM;IAACG,SAAS;IAAEC,QAAQ;IAAEC,SAAS;IAAEC;EAAQ,CAAC,GAAGN,UAAU,CAACO,KAAK,IAAI,CAAC,CAAC;EACzE,MAAMC,cAAc,GAAG,IAAAC,uCAA2B,EAACN,SAAS,CAAC;EAC7D,MAAMO,aAAa,GAAG,IAAAD,uCAA2B,EAACL,QAAQ,CAAC;EAC3D,MAAMO,cAAc,GAAG,IAAAF,uCAA2B,EAACJ,SAAS,CAAC;EAC7D,MAAMO,aAAa,GAAG,IAAAH,uCAA2B,EAACH,QAAQ,CAAC;;EAE3D;EACA,MAAMO,WAAW,GAAGX,KAAK,GAAGD,MAAM;;EAElC;EACA,IAAIa,WAAW,GAAGZ,KAAK;EACvB,IAAIa,YAAY,GAAGd,MAAM;;EAEzB;EACA,IAAIS,aAAa,IAAII,WAAW,GAAGJ,aAAa,EAAE;IAChDI,WAAW,GAAGJ,aAAa;IAC3BK,YAAY,GAAGD,WAAW,GAAGD,WAAW;EAC1C;EACA,IAAIV,SAAS,IAAIY,YAAY,GAAGP,cAAc,EAAE;IAC9CO,YAAY,GAAGP,cAAc;IAC7BM,WAAW,GAAGC,YAAY,GAAGF,WAAW;EAC1C;;EAEA;EACA,IAAIC,WAAW,GAAGJ,aAAa,EAAE;IAC/BI,WAAW,GAAGJ,aAAa;IAC3BK,YAAY,GAAGD,WAAW,GAAGD,WAAW;EAC1C;;EAEA;EACA,IAAID,aAAa,IAAIE,WAAW,GAAGF,aAAa,EAAE;IAChDE,WAAW,GAAGF,aAAa;IAC3BG,YAAY,GAAGD,WAAW,GAAGD,WAAW;EAC1C;EACA,IAAIF,cAAc,IAAII,YAAY,GAAGJ,cAAc,EAAE;IACnDI,YAAY,GAAGJ,cAAc;IAC7BG,WAAW,GAAGC,YAAY,GAAGF,WAAW;EAC1C;;EAEA;EACA,IAAIE,YAAY,GAAGJ,cAAc,EAAE;IACjCI,YAAY,GAAGJ,cAAc;IAC7BG,WAAW,GAAGC,YAAY,GAAGF,WAAW;EAC1C;EAEA,OAAO;IAACZ,MAAM,EAAEc,YAAY;IAAEb,KAAK,EAAEY;EAAW,CAAC;AACnD;AAEA,SAASE,YAAYA,CACnBC,YAAsC,EACtCC,MAA2B,EAC3BC,SAAiB,EACjBC,aAAmC,EACnCC,cAA+B,EAC/BC,GAAoB,EACpB;EACA,IAAInC,aAAa,GAAG+B,MAAM;;EAE1B;EACA,IAAI,CAAC/B,aAAa,CAACoC,WAAW,EAAE;IAC9B,MAAMC,cAAc,GAAGP,YAAY,CAACQ,aAAa,CAAC,gCAAgCP,MAAM,CAACQ,YAAY,CAAC,SAAS,CAAC,IAAI,CAAwB;IAE5I,MAAMC,iBAAiB,GAAGzC,sBAAsB,CAACsC,cAAc,CAAC,EAAEE,YAAY,CAAC,UAAU,CAAC;IAC1F,MAAME,gBAAgB,GAAG1C,sBAAsB,CAACC,aAAa,CAAC,EAAEuC,YAAY,CAAC,UAAU,CAAC;IACxF,IAAIC,iBAAiB,IAAIC,gBAAgB,IAAID,iBAAiB,KAAKC,gBAAgB,EAAE;MACnFzC,aAAa,GAAGqC,cAAc;IAChC,CAAC,MAAM;MACL,OAAO,CAAC;IACV;EACF;;EAEA;EACA,MAAMK,cAAc,GAAGZ,YAAY,CAACQ,aAAa,CAAC,mCAAmCN,SAAS,IAAI,CAAC;;EAEnG;EACA,IAAIU,cAAc,EAAE;IAClBA,cAAc,CAACC,MAAM,CAAC,CAAC;EACzB;EAEA,MAAMC,GAAG,GAAGV,cAAc,CAACW,UAA8B;EACzD,MAAM;IAAC3B,SAAS;IAAEC,QAAQ;IAAEH,SAAS;IAAEC,QAAQ;IAAE6B;EAAY,CAAC,GAAGb,aAAa,CAACc,WAAW,IAAI,CAAC,CAAC;EAChG,MAAMC,QAAQ,GAAG;IACf9B,SAAS;IACTC,QAAQ;IACRH,SAAS;IACTC,QAAQ;IACR6B;EACF,CAAC;;EAED;EACAG,MAAM,CAACC,MAAM,CAAChB,cAAc,CAACd,KAAK,EAAE;IAClC,GAAG3B,wBAAwB;IAC3B,IAAI0C,GAAG,IAAI;MACT,GAAGa,QAAQ;MACXG,OAAO,EAAE,MAAM;MACfC,UAAU,EAAE,QAAQ;MACpBC,cAAc,EAAE;IAClB,CAAC;EACH,CAAC,CAAC;EACFJ,MAAM,CAACC,MAAM,CAACN,GAAG,CAACxB,KAAK,EAAE,CAACe,GAAG,IAAIa,QAAQ,CAAC;EAE1ChD,aAAa,CAACsD,WAAW,CAACpB,cAAc,CAAC;EAEzC,MAAMqB,mBAAmB,GAAGzB,YAAY;EACxC,IAAIA,YAAY,CAAC0B,aAAa,EAAE;IAC9BD,mBAAmB,CAACC,aAAa,CAACC,IAAI,CAACb,GAAG,CAAC;EAC7C,CAAC,MAAM;IACLW,mBAAmB,CAACC,aAAa,GAAG,CAACZ,GAAG,CAAC;EAC3C;EAEA,MAAMc,iBAAiB,GAAG9C,oBAAoB,CAACgC,GAAG,CAAC,CAAC9B,MAAM;EAC1DmC,MAAM,CAACC,MAAM,CAAChB,cAAc,CAACd,KAAK,EAAE;IAClCN,MAAM,EAAE,GAAG4C,iBAAiB;EAC9B,CAAC,CAAC;EACF;EACA,MAAMC,cAAc,GAAG,IAAArC,uCAA2B,EAAC,GAAGW,aAAa,CAACc,WAAW,EAAEa,SAAS,EAAE,CAAC;EAC7FX,MAAM,CAACC,MAAM,CAAClD,aAAa,CAACoB,KAAK,EAAE;IACjCyC,aAAa,EAAEtD,yBAAyB,CAACmD,iBAAiB,EAAEC,cAAc;EAC5E,CAAC,CAAC;AACJ;AAEA,SAASG,kBAAkBA,CAAChC,YAAsC,EAAEiC,UAAoB,EAAEC,GAAW,EAAE/B,aAAmC,EAAE;EAC1I,IAAIpC,UAAU,CAACoE,GAAG,CAACF,UAAU,CAACG,UAAU,CAAC,EAAE;IACzC,MAAMC,OAAO,GAAGtE,UAAU,CAACuE,GAAG,CAACL,UAAU,CAACG,UAAU,CAAC;IACrD;IACA,MAAM7B,cAAc,GAAGP,YAAY,CAACQ,aAAa,CAAC,gCAAgCyB,UAAU,CAACG,UAAU,IAAI,CAAwB;IACnI,IAAIC,OAAO,EAAEH,GAAG,KAAKA,GAAG,IAAI3B,cAAc,IAAItC,sBAAsB,CAACsC,cAAc,CAAC,EAAE;MACpF;IACF;IAEAgC,YAAY,CAACF,OAAO,EAAEG,OAAO,CAAC;IAC9BzE,UAAU,CAAC0E,MAAM,CAACR,UAAU,CAACG,UAAU,CAAC;EAC1C;EAEA,MAAMI,OAAO,GAAGE,UAAU,CAAC,MAAM;IAC/B,MAAMtC,cAAc,GAAGuC,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;IACrDxC,cAAc,CAAC5B,eAAe,GAAG,OAAO;IACxC4B,cAAc,CAACyC,YAAY,CAAC,WAAW,EAAE,kBAAkB,CAAC;IAE5D,MAAM/B,GAAG,GAAG,IAAIgC,KAAK,CAAC,CAAC;IACvB1C,cAAc,CAACoB,WAAW,CAACV,GAAG,CAAC;IAE/BA,GAAG,CAACtC,eAAe,GAAG,OAAO;IAC7BsC,GAAG,CAACiC,MAAM,GAAG,MAAMhD,YAAY,CAACC,YAAY,EAAEiC,UAAU,CAACe,OAAO,EAAEd,GAAG,EAAE/B,aAAa,EAAEC,cAAc,CAAC;IACrGU,GAAG,CAACmC,OAAO,GAAI5C,GAAG,IAAKN,YAAY,CAACC,YAAY,EAAEiC,UAAU,CAACe,OAAO,EAAEd,GAAG,EAAE/B,aAAa,EAAEC,cAAc,EAAEC,GAAG,CAAC;IAC9GS,GAAG,CAACoC,GAAG,GAAGhB,GAAG;IACbnE,UAAU,CAAC0E,MAAM,CAACR,UAAU,CAACG,UAAU,CAAC;EAC1C,CAAC,EAAE3E,qCAAqC,CAAC;EACzCM,UAAU,CAACoF,GAAG,CAAC,GAAGnD,YAAY,CAACoD,QAAQ,IAAInB,UAAU,CAACG,UAAU,EAAE,EAAE;IAClEI,OAAO;IACPN;EACF,CAAC,CAAC;AACJ;;AAEA;AACA,SAASmB,mBAAmBA,CAACpB,UAAoB,EAAEqB,UAA+B,EAAEzB,cAAc,GAAG,CAAC,EAAE;EACtG,MAAME,aAAa,GAAGtD,yBAAyB,CAAC,IAAAe,uCAA2B,EAAC8D,UAAU,CAAChE,KAAK,CAACN,MAAM,CAAC,EAAE6C,cAAc,CAAC;EACrHI,UAAU,CAACe,OAAO,CAACxB,WAAW,CAAC8B,UAAU,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC;EAE1D,IAAIC,aAAa,GAAGvB,UAAU,CAACe,OAAO;EACtC,OAAOQ,aAAa,CAACC,aAAa,IAAI,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC,CAACC,QAAQ,CAACF,aAAa,CAAC/C,YAAY,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,EAAE;IAChH+C,aAAa,GAAGA,aAAa,CAACC,aAAoC;EACpE;EACAtC,MAAM,CAACC,MAAM,CAACoC,aAAa,CAAClE,KAAK,EAAE;IACjCyC;EACF,CAAC,CAAC;EAEF,OAAOE,UAAU;AACnB;;AAEA;AACA,SAAS0B,qBAAqBA,CAC5B3D,YAAsC,EACtCiC,UAAoB,EACpB2B,IAAY,EACZC,MAAuB,EACvB1D,aAAmC,EACnC2D,iBAAyC,EACzC;EACA,MAAM;IAACC,8BAA8B;IAAEC;EAA4B,CAAC,GAAGF,iBAAiB;EACxF,MAAMG,SAAS,GAAGJ,MAAM,CAACvF,IAAI,CAAE4F,CAAC,IAAKA,CAAC,CAACC,IAAI,KAAK,MAAM,CAAC;EACvD,IAAIjE,SAAS,GAAG,EAAE;EAClB,IAAI+D,SAAS,EAAE;IACb/D,SAAS,GAAG0D,IAAI,CAACQ,SAAS,CAACH,SAAS,CAACI,KAAK,EAAEJ,SAAS,CAACI,KAAK,GAAGJ,SAAS,CAACK,MAAM,CAAC;IAC/E,IAAIP,8BAA8B,IAAIC,4BAA4B,IAAIA,4BAA4B,CAAC1F,IAAI,CAAE4D,GAAG,IAAKhC,SAAS,CAACqE,UAAU,CAACrC,GAAG,CAAC,CAAC,EAAE;MAC3IhC,SAAS,GAAG6D,8BAA8B,CAAC7D,SAAS,CAAC;IACvD;EACF;EAEA,MAAM2B,cAAc,GAAG,IAAArC,uCAA2B,EAAC,GAAGW,aAAa,CAACc,WAAW,EAAEa,SAAS,EAAE,CAAC;EAC7F,MAAM0C,iBAAiB,GAAG,IAAAhF,uCAA2B,EAAC,GAAGW,aAAa,CAACc,WAAW,EAAEwD,YAAY,EAAE,CAAC;;EAEnG;EACA;EACA,MAAMC,oBAAoB,GAAG1E,YAAY,CAAC0B,aAAa,EAAEpD,IAAI,CAAEC,EAAE,IAAKA,EAAE,EAAE2E,GAAG,KAAKhD,SAAS,CAAC;EAC5F,MAAMyE,oBAAoB,GAAGD,oBAAoB,EAAEjB,aAAa;EAEhE,IAAIkB,oBAAoB,IAAIA,oBAAoB,CAAClE,YAAY,CAAC,WAAW,CAAC,KAAK,kBAAkB,EAAE;IACjG,OAAO4C,mBAAmB,CAACpB,UAAU,EAAE0C,oBAAoB,EAAyB9C,cAAc,CAAC;EACrG;;EAEA;EACA,MAAM+C,OAAO,GAAG,IAAAC,wCAAsB,EAAC3E,SAAS,EAAEC,aAAa,CAAC;EAChE,IAAIyE,OAAO,EAAE;IACX3C,UAAU,CAACe,OAAO,CAACxB,WAAW,CAACoD,OAAO,CAAC;EACzC;EAEAzD,MAAM,CAACC,MAAM,CAACa,UAAU,CAACe,OAAO,CAAC1D,KAAK,EAAE;IACtC+B,OAAO,EAAE,OAAO;IAChBoD,YAAY,EAAE,GAAGD,iBAAiB,IAAI;IACtCzC,aAAa,EAAE5B,aAAa,CAAC2E,yBAAyB,EAAE9F,MAAM,IAAImB,aAAa,CAAC4E,gBAAgB,EAAE/F,MAAM,IAAK,CAAC,CAACmB,aAAa,CAAC4E,gBAAgB,IAAI,MAAO,IAAIC;EAC9J,CAAC,CAAC;EAEFhD,kBAAkB,CAAChC,YAAY,EAAEiC,UAAU,EAAE/B,SAAS,EAAEC,aAAa,CAAC;EAEtE,OAAO8B,UAAU;AACnB;AAEA,SAASgD,qBAAqBA,CAACjF,YAAsC,EAAEG,aAAmC,EAAE;EAC1GH,YAAY,EAAEkF,gBAAgB,CAAC,KAAK,CAAC,CAACC,OAAO,CAAErE,GAAG,IAAK;IACrD;IACA,IAAIA,GAAG,CAACsE,YAAY,GAAG,CAAC,EAAE;MACxB;IACF;IAEA,MAAMlD,GAAG,GAAGpB,GAAG,CAACoC,GAAG;IACnB,MAAMnE,UAAU,GAAG+B,GAAG;IACtB/B,UAAU,CAACmE,GAAG,GAAG,EAAE;IACnBnE,UAAU,CAACgE,MAAM,GAAG,MAAMhD,YAAY,CAACC,YAAY,EAAEc,GAAG,CAAC2C,aAAa,EAAEA,aAAa,EAAyBvB,GAAG,EAAE/B,aAAa,EAAEW,GAAG,CAAC2C,aAAoC,CAAC;IAC3K1E,UAAU,CAACmE,GAAG,GAAG,GAAGhB,GAAG,GAAG;EAC5B,CAAC,CAAC;AACJ;;AAEA","ignoreList":[]}
